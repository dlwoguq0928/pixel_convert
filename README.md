# ドット絵こんばーた
画像をモザイク化→色をクラスタリングしてドット絵っぽくします。  
下記で稼働中  
[ドット絵こんばーた](https://app.monopro.org/pixel/)  

## 必須環境
- Python 3.x  
- Flask  
- Pillow  
- OpenCV  
- uWSGI(uWSGIから起動する場合)  

## 起動
pixel_convert.pyをPythonで実行してください  
Flaskのサーバーがローカルホストで起動しますのでアクセスして後はお好きに遊んでください  
(デフォルトだとhttp://127.0.0.1:5000/)  
処理前画像はstatic/img/に、処理結果はstatic/results/に保存されます  

## ざっくりとした動作とか
- 画像をn分の1に縮小→元サイズに復元してモザイク化します  
- 必要に応じて平滑化やerodeなどのフィルターを掛けます(出力線のかすれやノイズが入るときに使う)  
- ピクセルの色をk色にkmeansで分類しそれぞれの平均値を求め、色を置き換え減色します  
- ドット絵っぽいものが出力されます  
- 透過pngはRGBに変換されます  
